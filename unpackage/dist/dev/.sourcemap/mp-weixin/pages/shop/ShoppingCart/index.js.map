{"version":3,"sources":["webpack:////Users/piao/Documents/Project/yshopmall_uni/pages/shop/ShoppingCart/index.vue?edc2","webpack:////Users/piao/Documents/Project/yshopmall_uni/pages/shop/ShoppingCart/index.vue?da10","webpack:////Users/piao/Documents/Project/yshopmall_uni/pages/shop/ShoppingCart/index.vue?13d8","webpack:////Users/piao/Documents/Project/yshopmall_uni/pages/shop/ShoppingCart/index.vue?9b4c","webpack:////Users/piao/Documents/Project/yshopmall_uni/pages/shop/ShoppingCart/index.vue","webpack:////Users/piao/Documents/Project/yshopmall_uni/main.js"],"names":["CHECKED_IDS","name","components","Recommend","props","data","isIpx","cartList","invalid","valid","validList","isAllSelect","cartCount","countmoney","goodsHidden","footerswitch","count","checkedIds","loaded","watch","$yroute","n","carnum","countMoney","getCartList","gainCount","list","mounted","that","wx","getSystemInfo","success","res","console","log","model","indexOf","methods","goGoodsCon","item","$yrouter","push","path","query","id","productId","then","cookie","get","Array","isArray","forEach","cart","checked","length","delgoods","val","$dialog","toast","mes","i","undefined","$set","delInvalidGoods","splice","collectAll","category","product_id","type","placeOrder","join","manage","goodsOpen","plus","index","cartNum","attrInfo","stock","syncCartNum","reduce","sync","Math","max","catch","error","uni","showToast","title","response","msg","icon","duration","switchSelect","len","selectnum","set","allChecked","e","selectAllStatus","mp","detail","value","$forceUpdate","array","parseInt","carmoney","truePrice","createPage","Page"],"mappings":"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","file":"pages/shop/ShoppingCart/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=27e4397e&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('27e4397e')) {\n      api.createRecord('27e4397e', component.options)\n    } else {\n      api.reload('27e4397e', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=27e4397e&\", function () {\n      api.rerender('27e4397e', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/piao/Documents/Project/yshopmall_uni/pages/shop/ShoppingCart/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=27e4397e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport Recommend from \"@/components/Recommend\";\nimport {\n  getCartList,\n  postCartDel,\n  changeCartNum,\n  getCartCount\n} from \"@/api/store\";\nimport { postCollectAll } from \"@/api/user\";\nimport { mul, add } from \"@/utils/bc\";\nimport cookie from \"@/utils/store/cookie\";\nimport debounce from \"lodash.debounce\";\n\nconst CHECKED_IDS = \"cart_checked\";\n\nexport default {\n  name: \"ShoppingCart\",\n  components: {\n    Recommend\n  },\n  props: {},\n  data: function() {\n    return {\n      isIpx: false,\n      cartList: { invalid: [], valid: [] },\n      validList: [],\n      isAllSelect: false,\n      cartCount: 0,\n      countmoney: 0,\n      goodsHidden: true,\n      footerswitch: false,\n      count: 0,\n      checkedIds: [],\n      loaded: false\n    };\n  },\n  watch: {\n    $yroute(n) {\n      if (n.name === \"ShoppingCart\") {\n        this.carnum();\n        this.countMoney();\n        this.getCartList();\n        this.gainCount();\n        this.goodsHidden = true;\n        this.footerswitch = false;\n      }\n    },\n    cartList(list) {\n      this.validList = list.valid;\n    }\n  },\n  mounted: function() {\n    let that = this;\n    that.carnum();\n    that.countMoney();\n    that.getCartList();\n    that.gainCount();\n    wx.getSystemInfo({\n      success: function(res) {\n        console.log(res);\n        var name = \"iPhone X\";\n        if (res.model.indexOf(name) > -1) {\n          that.isIpx = true;\n        }\n      }\n    });\n  },\n  methods: {\n    goGoodsCon(item) {\n      this.$yrouter.push({\n        path: \"/pages/shop/GoodsCon/index\",\n        query: { id: item.productId }\n      });\n    },\n    getCartList: function() {\n      let that = this;\n      getCartList().then(res => {\n        that.cartList = res.data;\n        let checkedIds = cookie.get(CHECKED_IDS) || [];\n        if (!Array.isArray(checkedIds)) checkedIds = [];\n        this.cartList.valid.forEach(cart => {\n          if (checkedIds.indexOf(cart.id) !== -1) cart.checked = true;\n        });\n        if (checkedIds.length) {\n          that.checkedIds = checkedIds;\n          that.isAllSelect = checkedIds.length === this.cartList.valid.length;\n          that.carnum();\n          that.countMoney();\n        }\n        this.loaded = true;\n      });\n    },\n    //删除商品；\n    delgoods: function() {\n      let that = this,\n        id = [],\n        valid = [],\n        list = that.cartList.valid;\n      list.forEach(function(val) {\n        if (val.checked === true) {\n          id.push(val.id);\n        }\n      });\n      if (id.length === 0) {\n        that.$dialog.toast({ mes: \"请选择产品\" });\n        return;\n      }\n      postCartDel(id).then(function() {\n        list.forEach(function(val, i) {\n          if (val.checked === false || val.checked === undefined)\n            valid.push(list[i]);\n        });\n        that.$set(that.cartList, \"valid\", valid);\n        that.carnum();\n        that.countMoney();\n        that.gainCount();\n        that.getCartList();\n      });\n    },\n    // //获取数量\n    gainCount: function() {\n      let that = this;\n      getCartCount().then(res => {\n        that.count = res.data.count;\n      });\n    },\n    //清除失效产品；\n    delInvalidGoods: function() {\n      let that = this,\n        id = [],\n        list = that.cartList.invalid;\n      list.forEach(function(val) {\n        id.push(val.id);\n      });\n      postCartDel(id).then(function() {\n        list.splice(0, list.length);\n        that.gainCount();\n        that.getCartList();\n      });\n    },\n    //批量收藏;\n    collectAll: function() {\n      let that = this,\n        data = { id: [], category: \"\" },\n        list = that.cartList.valid;\n      list.forEach(function(val) {\n        if (val.checked === true) {\n          data.id.push(val.product_id);\n          data.category = val.type;\n        }\n      });\n      if (data.id.length === 0) {\n        that.$dialog.toast({ mes: \"请选择产品\" });\n        return;\n      }\n      postCollectAll(data).then(function() {\n        that.$dialog.toast({ mes: \"收藏成功!\" });\n      });\n    },\n    //立即下单；\n    placeOrder: function() {\n      let that = this,\n        list = that.cartList.valid,\n        id = [];\n      list.forEach(function(val) {\n        if (val.checked === true) {\n          id.push(val.id);\n        }\n      });\n      if (id.length === 0) {\n        that.$dialog.toast({ mes: \"请选择产品\" });\n        return;\n      }\n      console.log(id);\n      this.$yrouter.push({\n        path: \"/pages/order/OrderSubmission/index\",\n        query: { id: id.join(\",\") }\n      });\n    },\n    manage: function() {\n      let that = this;\n      that.footerswitch = !that.footerswitch;\n    },\n    goodsOpen: function() {\n      let that = this;\n      that.goodsHidden = !that.goodsHidden;\n    },\n    //加\n    plus: function(index) {\n      let that = this;\n      let list = that.cartList.valid[index];\n      list.cartNum++;\n      if (list.attrInfo) {\n        if (list.cartNum >= list.attrInfo.stock) {\n          that.$set(list, \"cart_num\", list.attrInfo.stock);\n        }\n      } else {\n        if (list.cartNum >= list.stock) {\n          that.$set(list, \"cart_num\", list.stock);\n        }\n      }\n      that.carnum();\n      that.countMoney();\n      that.syncCartNum(list);\n    },\n    //减\n    reduce: function(index) {\n      let that = this;\n      let list = that.cartList.valid[index];\n      if (list.cartNum <= 1) {\n        that.$dialog.toast({ mes: \"已经是底线啦!\" });\n        return;\n      }\n      list.cartNum--;\n      if (list.cartNum < 1) {\n        that.$set(list, \"cart_num\", 1);\n      }\n      that.carnum();\n      that.countMoney();\n      that.syncCartNum(list);\n    },\n    syncCartNum(cart) {\n      if (!cart.sync) {\n        changeCartNum(cart.id, Math.max(cart.cartNum, 1) || 1)\n          .then(res => {\n            this.getCartList();\n          })\n          .catch(error => {\n            uni.showToast({\n              title: error.response.data.msg,\n              icon: \"none\",\n              duration: 2000\n            });\n          });\n      }\n    },\n    //单选\n    switchSelect: function(index) {\n      let that = this,\n        cart = that.cartList.valid[index],\n        i = this.checkedIds.indexOf(cart.id);\n      cart.checked = !cart.checked;\n\n      if (i !== -1) this.checkedIds.splice(i, 1);\n      if (cart.checked) {\n        this.checkedIds.push(cart.id);\n      }\n      let len = that.cartList.valid.length;\n      let selectnum = [];\n      for (let i = 0; i < len; i++) {\n        if (that.cartList.valid[i].checked === true) {\n          selectnum.push(true);\n        }\n      }\n      that.isAllSelect = selectnum.length === len;\n      that.$set(that, \"cartList\", that.cartList);\n      that.$set(that, \"isAllSelect\", that.isAllSelect);\n      cookie.set(CHECKED_IDS, that.checkedIds);\n      that.carnum();\n      that.countMoney();\n    },\n    //全选\n    allChecked: function(e) {\n      let that = this;\n      let selectAllStatus = e.mp.detail.value[0] ? true : false;\n      // let selectAllStatus = that.isAllSelect;\n      let checkedIds = [];\n      // for (let i = 0; i < array.length; i++) {\n      //   array[i].checked = selectAllStatus;\n      //   checked.push()\n      // }\n      that.cartList.valid.forEach(cart => {\n        cart.checked = selectAllStatus;\n        if (selectAllStatus) {\n          checkedIds.push(cart.id);\n        }\n      });\n      let cartList = {\n        ...that.cartList\n      };\n      that.cartList = [];\n      that.cartList = cartList;\n      this.$set(this, \"cartList\", this.cartList);\n      this.$set(this, \"isAllSelect\", selectAllStatus);\n      this.checkedIds = checkedIds;\n      cookie.set(CHECKED_IDS, checkedIds);\n      that.carnum();\n      that.countMoney();\n      this.$forceUpdate();\n    },\n    //数量\n    carnum: function() {\n      let that = this;\n      var carnum = 0;\n      var array = that.cartList.valid;\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].checked === true) {\n          carnum += parseInt(array[i].cartNum);\n        }\n      }\n      that.$set(that, \"cartCount\", carnum);\n    },\n    //总共价钱；\n    countMoney: function() {\n      let that = this;\n      let carmoney = 0;\n      let array = that.cartList.valid;\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].checked === true) {\n          carmoney = add(carmoney, mul(array[i].cartNum, array[i].truePrice));\n        }\n      }\n      that.countmoney = carmoney;\n    }\n  }\n};\n","import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/shop/ShoppingCart/index.vue'\ncreatePage(Page)"],"sourceRoot":""}