{"version":3,"sources":["webpack:////Users/gaoxs/Documents/project/yshopmall_uni/main.js","webpack:////Users/gaoxs/Documents/project/yshopmall_uni/pages/user/PersonalData/index.vue?6b98","webpack:////Users/gaoxs/Documents/project/yshopmall_uni/pages/user/PersonalData/index.vue?27a6","webpack:////Users/gaoxs/Documents/project/yshopmall_uni/pages/user/PersonalData/index.vue?a58b","webpack:////Users/gaoxs/Documents/project/yshopmall_uni/pages/user/PersonalData/index.vue?2bc2","webpack:////Users/gaoxs/Documents/project/yshopmall_uni/pages/user/PersonalData/index.vue"],"names":["createPage","Page","name","components","data","url","VUE_APP_API_URL","headers","Authorization","$store","state","token","avatar","isWeixin","currentAccounts","switchUserInfo","userIndex","watch","$yroute","n","dispatch","computed","mounted","userInfo","getUserInfo","methods","goChangePassword","$yrouter","push","switchAccounts","index","that","length","undefined","uni","showToast","title","icon","duration","user_type","then","hideLoading","expires_time","store","commit","$emit","location","reload","catch","err","msg","response","cookie","set","res","i","uid","phone","splice","$set","imageuploaded","status","submit","nickname","$uni","back","logout","showModal","content","success","confirm","clearAuthStatus","href","origin","cancel","console","log"],"mappings":";;;;;;;;;;kDAAA,wCAAmB;;AAEnB;AACA,yG;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACJA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACzCf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACiGt2B;AACA;AACA;AACA;AACA;AACA;AACA,0E,8FAvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;eAUe,EACbC,IAAI,EAAE,cADO,EAEbC,UAAU,EAAE,CACV;AADU,GAFC,EAKbC,IAAI,EAAE,gBAAW,CACf,OAAO,EACLC,GAAG,YAAKC,uBAAL,kBADE,EAELC,OAAO,EAAE,EACPC,aAAa,EAAE,YAAY,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,KADtC,EAFJ,EAKLC,MAAM,EAAE,EALH,EAMLC,QAAQ,EAAE,KANL,EAOLC,eAAe,EAAE,CAPZ,EAQLC,cAAc,EAAE,EARX,EASLC,SAAS,EAAE,CATN,EAAP,CAWD,CAjBY,EAkBbC,KAAK,EAAE,EACLC,OADK,mBACGC,CADH,EACM,CACT,IAAIA,CAAC,CAACjB,IAAF,KAAW,cAAf,EAA+B,KAAKO,MAAL,CAAYW,QAAZ,CAAqB,UAArB,EAAiC,IAAjC,EAChC,CAHI,EAlBM,EAuBbC,QAAQ,EAAE,sBAAW,CAAC,UAAD,CAAX,CAvBG,EAwBbC,OAAO,EAAE,mBAAW,CAClB,KAAKV,MAAL,GAAc,KAAKW,QAAL,CAAcX,MAA5B,CACA,KAAKC,QAAL,GAAgB,sBAAhB,CACA,KAAKW,WAAL,GACD,CA5BY,EA6BbC,OAAO,EAAE,EACPC,gBADO,8BACY,CACjB,KAAKC,QAAL,CAAcC,IAAd,CAAmB,kCAAnB,EACD,CAHM,EAIPC,cAAc,EAAE,wBAASC,KAAT,EAAgB,CAC9B,IAAIC,IAAI,GAAG,IAAX,CACA,KAAKf,SAAL,GAAiBc,KAAjB,CACA,IAAIP,QAAQ,GAAG,KAAKR,cAAL,CAAoB,KAAKC,SAAzB,CAAf,CACA,IAAI,KAAKD,cAAL,CAAoBiB,MAApB,IAA8B,CAAlC,EAAqC,OAAO,IAAP,CACrC,IAAIT,QAAQ,KAAKU,SAAjB,EAA4B,CAC1BC,GAAG,CAACC,SAAJ,CAAc,EACZC,KAAK,EAAE,UADK,EAEZC,IAAI,EAAE,MAFM,EAGZC,QAAQ,EAAE,IAHE,EAAd,EAKA,OACD,CACD,IAAIf,QAAQ,CAACgB,SAAT,KAAuB,IAA3B,EAAiC,CAC/B,2BACGC,IADH,CACQ,gBAAc,KAAXpC,IAAW,QAAXA,IAAW,CAClB8B,GAAG,CAACO,WAAJ,GACA,IAAMC,YAAY,GAAG,oBAAMtC,IAAI,CAACsC,YAAX,CAArB,CACAC,eAAMC,MAAN,CAAa,OAAb,EAAsBxC,IAAI,CAACO,KAA3B,EAAkC+B,YAAlC,EACAX,IAAI,CAACc,KAAL,CAAW,cAAX,EAA2B,KAA3B,EACAC,QAAQ,CAACC,MAAT,GACD,CAPH,EAQGC,KARH,CAQS,UAAAC,GAAG,EAAI,CACZf,GAAG,CAACO,WAAJ,GACAP,GAAG,CAACC,SAAJ,CAAc,EACZC,KAAK,EAAEa,GAAG,CAACC,GAAJ,IAAWD,GAAG,CAACE,QAAJ,CAAa/C,IAAb,CAAkB8C,GADxB,EAEZb,IAAI,EAAE,MAFM,EAGZC,QAAQ,EAAE,IAHE,EAAd,EAKD,CAfH,EAgBD,CAjBD,MAiBO,CACLc,gBAAOC,GAAP,CAAW,WAAX,EAAwB,QAAxB,EAAkC,EAAlC,EACAnB,GAAG,CAACO,WAAJ,GACA,KAAKhC,MAAL,CAAYmC,MAAZ,CAAmB,QAAnB,EACA,KAAKC,KAAL,CAAW,cAAX,EAA2B,KAA3B,EACD,CACF,CAxCM,EAyCPrB,WAAW,EAAE,uBAAW,kBACtB,IAAIO,IAAI,GAAG,IAAX,CACA,qBAAUS,IAAV,CAAe,UAAAc,GAAG,EAAI,CACpB,IAAIvC,cAAc,GAAGuC,GAAG,CAAClD,IAAJ,CAASW,cAA9B,CACA,KAAK,IAAIwC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGxC,cAAc,CAACiB,MAAnC,EAA2CuB,CAAC,EAA5C,EAAgD,CAC9C,IAAIxC,cAAc,CAACwC,CAAD,CAAd,CAAkBC,GAAlB,IAAyBzB,IAAI,CAACR,QAAL,CAAciC,GAA3C,EAAgDzB,IAAI,CAACf,SAAL,GAAiBuC,CAAjB,CAChD,IACE,CAACxB,IAAI,CAAClB,QAAN,IACAE,cAAc,CAACwC,CAAD,CAAd,CAAkBhB,SAAlB,IAA+B,IAD/B,IAEAxB,cAAc,CAACwC,CAAD,CAAd,CAAkBE,KAAlB,KAA4B,EAH9B,EAKE1C,cAAc,CAAC2C,MAAf,CAAsBH,CAAtB,EAAyB,CAAzB,EACH,CACDxB,IAAI,CAAC4B,IAAL,CAAU,KAAV,EAAgB,gBAAhB,EAAkC5C,cAAlC,EACD,CAZD,EAaD,CAxDM,EAyDP6C,aAzDO,yBAyDON,GAzDP,EAyDY,CACjB,IAAIA,GAAG,CAACO,MAAJ,KAAe,GAAnB,EAAwB,CACtB3B,GAAG,CAACC,SAAJ,CAAc,EACZC,KAAK,EAAEkB,GAAG,CAACJ,GAAJ,IAAWI,GAAG,CAACH,QAAJ,CAAa/C,IAAb,CAAkB8C,GADxB,EAEZb,IAAI,EAAE,MAFM,EAGZC,QAAQ,EAAE,IAHE,EAAd,EAKA,OACD,CACD,IAAI,KAAKvB,cAAL,CAAoB,KAAKC,SAAzB,MAAwCiB,SAA5C,EAAuD;AACvD,WAAK0B,IAAL,CAAU,KAAK5C,cAAL,CAAoB,KAAKC,SAAzB,CAAV,EAA+C,QAA/C,EAAyDsC,GAAG,CAAClD,IAAJ,CAASC,GAAlE;AACD,KApEM;;AAsEPyD,UAAM,EAAE,kBAAW;AACjB,UAAIvC,QAAQ,GAAG,KAAKR,cAAL,CAAoB,KAAKC,SAAzB,CAAf;AACA,8BAAa;AACX+C,gBAAQ,EAAE,iBAAK,KAAKxC,QAAL,CAAcwC,QAAnB,CADC;AAEXnD,cAAM,EAAEW,QAAQ,CAACX,MAFN,EAAb;AAGG4B,UAHH;AAIE,gBAAAc,GAAG,EAAI;AACL,cAAI,CAAC7C,MAAL,CAAYW,QAAZ,CAAqB,UAArB,EAAiC,IAAjC;AACA,cAAI,CAAC4C,IAAL,CAAU7B,SAAV,CAAoB;AAClBC,eAAK,EAAEkB,GAAG,CAACJ,GADO;AAElBb,cAAI,EAAE,MAFY;AAGlBC,kBAAQ,EAAE,IAHQ,EAApB;;AAKA,cAAI,CAACX,QAAL,CAAcsC,IAAd;AACD,OAZH;AAaE,gBAAAhB,GAAG,EAAI;AACLf,WAAG,CAACC,SAAJ,CAAc;AACZC,eAAK,EAAEa,GAAG,CAACC,GAAJ,IAAWD,GAAG,CAACE,QAAJ,CAAa/C,IAAb,CAAkB8C,GADxB;AAEZb,cAAI,EAAE,MAFM;AAGZC,kBAAQ,EAAE,IAHE,EAAd;;AAKD,OAnBH;;AAqBD,KA7FM;AA8FP4B,UAAM,EAAE,kBAAW;AACjBhC,SAAG,CAACiC,SAAJ,CAAc;AACZ/B,aAAK,EAAE,IADK;AAEZgC,eAAO,EAAE,SAFG;AAGZC,eAAO,EAAE,iBAASf,GAAT,EAAc;AACrB,cAAIA,GAAG,CAACgB,OAAR,EAAiB;AACf;AACG9B,gBADH,CACQ,UAAAc,GAAG,EAAI;AACX,oBAAI,CAAC7C,MAAL,CAAYmC,MAAZ,CAAmB,QAAnB;AACA2B,6BAAe;AACfzB,sBAAQ,CAAC0B,IAAT,GAAgB1B,QAAQ,CAAC2B,MAAzB;AACD,aALH;AAMGzB,iBANH,CAMS,UAAAC,GAAG,EAAI,CAAE,CANlB;AAOD,WARD,MAQO,IAAIK,GAAG,CAACoB,MAAR,EAAgB;AACrBC,mBAAO,CAACC,GAAR,CAAY,QAAZ;AACD;AACF,SAfW,EAAd;;AAiBD,KAhHM,EA7BI,E","file":"pages/user/PersonalData/index.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/user/PersonalData/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=2a5eefcc&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('2a5eefcc')) {\n      api.createRecord('2a5eefcc', component.options)\n    } else {\n      api.reload('2a5eefcc', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=2a5eefcc&\", function () {\n      api.rerender('2a5eefcc', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/gaoxs/Documents/project/yshopmall_uni/pages/user/PersonalData/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=2a5eefcc&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapGetters } from \"vuex\";\nimport { trim, isWeixin } from \"@/utils\";\nimport { VUE_APP_API_URL } from \"@/config\";\nimport { postUserEdit, getLogout, switchH5Login, getUser } from \"@/api/user\";\nimport cookie from \"@/utils/store/cookie\";\nimport store from \"@//store\";\nimport dayjs from \"dayjs\";\n\nexport default {\n  name: \"PersonalData\",\n  components: {\n    // VueCoreImageUpload\n  },\n  data: function() {\n    return {\n      url: `${VUE_APP_API_URL}/upload/image`,\n      headers: {\n        Authorization: \"Bearer \" + this.$store.state.token\n      },\n      avatar: \"\",\n      isWeixin: false,\n      currentAccounts: 0,\n      switchUserInfo: [],\n      userIndex: 0\n    };\n  },\n  watch: {\n    $yroute(n) {\n      if (n.name === \"PersonalData\") this.$store.dispatch(\"USERINFO\", true);\n    }\n  },\n  computed: mapGetters([\"userInfo\"]),\n  mounted: function() {\n    this.avatar = this.userInfo.avatar;\n    this.isWeixin = isWeixin();\n    this.getUserInfo();\n  },\n  methods: {\n    goChangePassword() {\n      this.$yrouter.push(\"/pages/user/ChangePassword/index\");\n    },\n    switchAccounts: function(index) {\n      let that = this;\n      this.userIndex = index;\n      let userInfo = this.switchUserInfo[this.userIndex];\n      if (this.switchUserInfo.length <= 1) return true;\n      if (userInfo === undefined) {\n        uni.showToast({\n          title: \"切换的账号不存在\",\n          icon: \"none\",\n          duration: 2000\n        });\n        return;\n      }\n      if (userInfo.user_type === \"h5\") {\n        switchH5Login()\n          .then(({ data }) => {\n            uni.hideLoading();\n            const expires_time = dayjs(data.expires_time);\n            store.commit(\"LOGIN\", data.token, expires_time);\n            that.$emit(\"changeswitch\", false);\n            location.reload();\n          })\n          .catch(err => {\n            uni.hideLoading();\n            uni.showToast({\n              title: err.msg || err.response.data.msg,\n              icon: \"none\",\n              duration: 2000\n            });\n          });\n      } else {\n        cookie.set(\"loginType\", \"wechat\", 60);\n        uni.hideLoading();\n        this.$store.commit(\"LOGOUT\");\n        this.$emit(\"changeswitch\", false);\n      }\n    },\n    getUserInfo: function() {\n      let that = this;\n      getUser().then(res => {\n        let switchUserInfo = res.data.switchUserInfo;\n        for (let i = 0; i < switchUserInfo.length; i++) {\n          if (switchUserInfo[i].uid == that.userInfo.uid) that.userIndex = i;\n          if (\n            !that.isWeixin &&\n            switchUserInfo[i].user_type != \"h5\" &&\n            switchUserInfo[i].phone === \"\"\n          )\n            switchUserInfo.splice(i, 1);\n        }\n        that.$set(this, \"switchUserInfo\", switchUserInfo);\n      });\n    },\n    imageuploaded(res) {\n      if (res.status !== 200) {\n        uni.showToast({\n          title: res.msg || res.response.data.msg,\n          icon: \"none\",\n          duration: 2000\n        });\n        return;\n      }\n      if (this.switchUserInfo[this.userIndex] === undefined) return;\n      this.$set(this.switchUserInfo[this.userIndex], \"avatar\", res.data.url);\n    },\n\n    submit: function() {\n      let userInfo = this.switchUserInfo[this.userIndex];\n      postUserEdit({\n        nickname: trim(this.userInfo.nickname),\n        avatar: userInfo.avatar\n      }).then(\n        res => {\n          this.$store.dispatch(\"USERINFO\", true);\n          this.$uni.showToast({\n            title: res.msg,\n            icon: \"none\",\n            duration: 2000\n          });\n          this.$yrouter.back();\n        },\n        err => {\n          uni.showToast({\n            title: err.msg || err.response.data.msg,\n            icon: \"none\",\n            duration: 2000\n          });\n        }\n      );\n    },\n    logout: function() {\n      uni.showModal({\n        title: \"提示\",\n        content: \"确认退出登录?\",\n        success: function(res) {\n          if (res.confirm) {\n            getLogout()\n              .then(res => {\n                this.$store.commit(\"LOGOUT\");\n                clearAuthStatus();\n                location.href = location.origin;\n              })\n              .catch(err => {});\n          } else if (res.cancel) {\n            console.log(\"用户点击取消\");\n          }\n        }\n      });\n    }\n  }\n};\n"],"sourceRoot":""}